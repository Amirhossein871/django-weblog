{% load static %}
<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه ورود</title>
    <link rel="stylesheet" href="{% static 'css/bootstrap.rtl.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/fonts/fonts.css' %}">
    <link rel="stylesheet" href="{% static 'css/variables.css' %}">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'boostrap-icons/font/bootstrap-icons.min.css' %}">
</head>

<body class="forms">
<div class="form-card">
    <div class="form-header">
        <img src="{% static 'img/logo.png' %}" alt="لوگو" class="form-logo">
        <h4>وارد شوید</h4>
        <p class="text-muted">لطفاً اطلاعات خود را وارد کنید</p>
    </div>

    <form class="needs-validation" novalidate method="post">
        {% csrf_token %}
        <div class="mb-3">
            <label for="username" class="form-label">نام کاربری یا ایمیل</label>
            {{ form.username }}
            <div class="invalid-feedback">لطفاً نام کاربری یا ایمیل معتبر وارد کنید.</div>
        </div>
        <div class="mb-3">
            <label for="password" class="form-label">رمز عبور</label>
            {{ form.password }}
            <div class="invalid-feedback">لطفاً رمز عبور را وارد کنید.</div>
        </div>

        <div class="d-flex justify-content-between align-items-center mb-3">
            <div class="form-check">
                {{ form.remember_me }}
                <label class="form-check-label" for="remember">مرا به خاطر بسپار</label>
            </div>
            <a href="#" class="text-decoration-none">فراموشی رمز؟</a>
        </div>

        <button class="btn btn-primary w-100" type="submit">ورود</button>
    </form>
</div>
</body>
<script src="{% static 'js/main.js' %}"></script>
<script src="{% static 'sweetalert2/sweetalert2.all.min.js' %}"></script>
<script>
    {% for message in messages %}
        Swal.fire({
            icon: "{% if message.tags == 'success' %}success{% elif message.tags == 'error' %}error{% else %}
                info{% endif %}",
            title: "{% if message.tags == 'success' %}موفقیت{% elif message.tags == 'error' %}خطا{% else %}
                اطلاعات{% endif %}",
            text: "{{ message }}",
            confirmButtonText: "باشه"
        });
    {% endfor %}
    {% if form.non_field_errors %}
        Swal.fire({
            icon: 'error',
            title: 'خطا',
            text: "{{ form.non_field_errors.as_text|escapejs }}",
            confirmButtonColor: '#3085d6'
        })
    {% endif %}
    {% if form.errors %}
        Swal.fire({
            icon: "error",
            title: "خطا در اعتبارسنجی",
            html: `
            <ul style="text-align:right; direction:rtl; list-style-type: none;">
                {% for field, errors in form.errors.items %}
                    <li><strong>{{ field.label }}</strong> {{ errors|join:", " }}</li>
                {% endfor %}
            </ul>
        `,
            confirmButtonText: "باشه",
            confirmButtonColor: "#d33"
        });
    {% endif %}
</script>
</html>
